; =============================== CONFIGS ===============================

[RP2040_FLASH]
build_flags =
  -D KNX_FLASH_SIZE=0x8000
  -D KNX_FLASH_OFFSET=0xF4000
  -D OPENKNX_FLASH_SIZE=0x4000
  -D OPENKNX_FLASH_OFFSET=0xFC000
  
; =============================== BASE ===============================

[RP2040] ; Base for Develop & Releases
extends = BASE, RP2040_2MB
; platform = raspberrypi
platform = https://github.com/maxgerhardt/platform-raspberrypi.git#c0acac7
platform_packages = framework-arduinopico @ https://github.com/earlephilhower/arduino-pico/releases/download/3.3.0/rp2040-3.3.0.zip
board = rpipico ; is overwriteable in e.g. release or develop envs
board_build.core = earlephilhower
extra_scripts =
  ${env.extra_scripts}
  lib/OGM-Common/patch_uf2.py
build_flags =
  ${BASE.build_flags}
  ${RP2040_FLASH.build_flags}
  -D PIO_FRAMEWORK_ARDUINO_ENABLE_RTTI

[RP2040_develop] ; Develop Only
extends = RP2040
build_type = debug
build_flags =
  -D OPENKNX_WAIT_FOR_SERIAL=5000
  -D OPENKNX_DEBUG
  ${RP2040.build_flags}

[RP2040_releases] ; Release Only
extends = RP2040
build_flags =
  -D OPENKNX_WATCHDOG
  ${RP2040.build_flags}

; 16MB Flash
[RP2040_16MB]
board_upload.maximum_size = 16777216
board_build.filesystem_size = 15724544

; 2MB Flash
[RP2040_2MB]
board_upload.maximum_size = 2097152
board_build.filesystem_size = 1044480

[UPLOAD_USB_RP2040]
upload_protocol = picotool

[RP2040_UPLOAD_USB]
upload_protocol = picotool

[RP2040_FIX_INCLUDES]
build_flags = 
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/cores/rp2040/api/deprecated-avr-comp/
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/include/pico_base/
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/lib/tinyusb/src/
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/boards/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_base/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_binary_info/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_bit_ops/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_divider/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_stdlib/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_sync/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_time/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_usb_reset_interface/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/common/pico_util/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2040/hardware_regs/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2040/hardware_structs/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/cmsis/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/cmsis/stub/CMSIS/Core/Include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/cmsis/stub/CMSIS/Device/RaspberryPi/RP2040/Include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_adc/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_base/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_claim/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_clocks/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_divider/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_dma/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_exception/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_flash/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_gpio/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_i2c/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_interp/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_irq/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_rtc/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_pio/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_pll/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_pwm/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_resets/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_spi/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_sync/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_timer/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_uart/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_vreg/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_watchdog/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_xosc/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_bootrom/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_cyw43_arch/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_double/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_float/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_int64_ops/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_lwip/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_multicore/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_platform/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_printf/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_runtime/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_stdio/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_stdio_uart/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_unique_id/include
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/lib/cyw43-driver/src
  -I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/lib/lwip/src/include